let currentLanguage="ar",currentTheme="light",elements={loadingScreen:document.getElementById("loading-screen"),navbar:document.getElementById("navbar"),navMenu:document.getElementById("nav-menu"),hamburger:document.getElementById("hamburger"),langToggle:document.getElementById("lang-toggle"),langText:document.getElementById("lang-text"),themeToggle:document.getElementById("theme-toggle"),backToTop:document.getElementById("back-to-top"),contactForm:document.getElementById("contact-form"),skillBars:document.querySelectorAll(".skill-progress"),navLinks:document.querySelectorAll(".nav-link")},translations={ar:{direction:"rtl",font:"Tajawal"},en:{direction:"ltr",font:"Poppins"}},utils={scrollToElement:e=>{var e=document.getElementById(e);e&&(e=e.offsetTop-70,window.scrollTo({top:e,behavior:"smooth"}))},throttle:(t,n)=>{let a;return function(){var e=arguments;a||(t.apply(this,e),a=!0,setTimeout(()=>a=!1,n))}},debounce:(t,n)=>{let a;return function(...e){clearTimeout(a),a=setTimeout(()=>{clearTimeout(a),t(...e)},n)}},isInViewport:e=>{e=e.getBoundingClientRect();return 0<=e.top&&0<=e.left&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},animateNumber:(n,a,r,o)=>{let i=performance.now(),s=e=>{var e=e-i,e=Math.min(e/o,1),t=Math.floor(a+(r-a)*e);n.textContent=t+(n.textContent.includes("%")?"%":"+"),e<1&&requestAnimationFrame(s)};requestAnimationFrame(s)}},loadingScreen={init:()=>{window.addEventListener("load",()=>{setTimeout(()=>{elements.loadingScreen&&(elements.loadingScreen.classList.add("hidden"),setTimeout(()=>{elements.loadingScreen.style.display="none"},500))},1e3)})}},navigation={init:()=>{navigation.setupScrollEffect(),navigation.setupMobileMenu(),navigation.setupSmoothScrolling(),navigation.setupActiveLinks()},setupScrollEffect:()=>{var e=utils.throttle(()=>{50<window.scrollY?elements.navbar.classList.add("scrolled"):elements.navbar.classList.remove("scrolled")},100);window.addEventListener("scroll",e)},setupMobileMenu:()=>{elements.hamburger&&elements.navMenu&&(elements.hamburger.addEventListener("click",()=>{elements.hamburger.classList.toggle("active"),elements.navMenu.classList.toggle("active")}),elements.navLinks.forEach(e=>{e.addEventListener("click",()=>{elements.hamburger.classList.remove("active"),elements.navMenu.classList.remove("active")})}),document.addEventListener("click",e=>{elements.navbar.contains(e.target)||(elements.hamburger.classList.remove("active"),elements.navMenu.classList.remove("active"))}))},setupSmoothScrolling:()=>{elements.navLinks.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();e=t.getAttribute("href").substring(1);utils.scrollToElement(e)})})},setupActiveLinks:()=>{let e=document.querySelectorAll("section[id]");var t=utils.throttle(()=>{let n="";e.forEach(e=>{var t=e.offsetTop-100;window.scrollY>=t&&window.scrollY<t+e.clientHeight&&(n=e.getAttribute("id"))}),elements.navLinks.forEach(e=>{e.classList.remove("active"),e.getAttribute("href")==="#"+n&&e.classList.add("active")})},100);window.addEventListener("scroll",t)}},languageToggle={init:()=>{var e=localStorage.getItem("portfolio-language")||"ar";languageToggle.setLanguage(e),elements.langToggle&&elements.langToggle.addEventListener("click",languageToggle.toggle)},toggle:()=>{var e="ar"===currentLanguage?"en":"ar";languageToggle.setLanguage(e)},setLanguage:n=>{currentLanguage=n,document.documentElement.lang=n,document.documentElement.dir=translations[n].direction,document.body.className=document.body.className.replace(/lang-\w+/,""),document.body.classList.add("lang-"+n),elements.langText&&(elements.langText.textContent="ar"===n?"EN":"ع"),document.querySelectorAll("[data-ar][data-en]").forEach(e=>{var t=e.getAttribute("data-"+n);t&&("INPUT"===e.tagName||"TEXTAREA"===e.tagName?e.placeholder=t:e.textContent=t)}),localStorage.setItem("portfolio-language",n),document.dispatchEvent(new CustomEvent("languageChanged",{detail:{language:n}}))}},themeToggle={init:()=>{var e=localStorage.getItem("portfolio-theme")||"light";themeToggle.setTheme(e),elements.themeToggle&&elements.themeToggle.addEventListener("click",themeToggle.toggle)},toggle:()=>{var e="light"===currentTheme?"dark":"light";themeToggle.setTheme(e)},setTheme:e=>{var t;currentTheme=e,document.documentElement.setAttribute("data-theme",e),elements.themeToggle&&(t=elements.themeToggle.querySelector("i"))&&(t.className="light"===e?"fas fa-moon":"fas fa-sun"),localStorage.setItem("portfolio-theme",e),document.dispatchEvent(new CustomEvent("themeChanged",{detail:{theme:e}}))}},backToTop={init:()=>{var e;elements.backToTop&&(e=utils.throttle(()=>{300<window.scrollY?elements.backToTop.classList.add("visible"):elements.backToTop.classList.remove("visible")},100),window.addEventListener("scroll",e),elements.backToTop.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}))}},skillsAnimation={init:()=>{skillsAnimation.setupIntersectionObserver()},setupIntersectionObserver:()=>{var e=document.getElementById("skills");if(e){let t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(skillsAnimation.animateSkillBars(),t.unobserve(e.target))})},{threshold:.3});t.observe(e)}},animateSkillBars:()=>{elements.skillBars.forEach((t,e)=>{setTimeout(()=>{var e=t.getAttribute("data-width");t.style.width=e+"%"},200*e)})}},statisticsAnimation={init:()=>{statisticsAnimation.setupIntersectionObserver()},setupIntersectionObserver:()=>{var e=document.getElementById("about");if(e){let t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(statisticsAnimation.animateNumbers(),t.unobserve(e.target))})},{threshold:.5});t.observe(e)}},animateNumbers:()=>{document.querySelectorAll(".stat-number").forEach((n,e)=>{setTimeout(()=>{var e=n.textContent,t=parseInt(e.replace(/\D/g,""));e.includes("+"),e.includes("%");utils.animateNumber(n,0,t,2e3)},300*e)})}},contactForm={init:()=>{elements.contactForm&&(elements.contactForm.addEventListener("submit",contactForm.handleSubmit),contactForm.setupFormValidation())},handleSubmit:e=>{e.preventDefault();e=new FormData(elements.contactForm);Object.fromEntries(e);contactForm.showLoading(),setTimeout(()=>{contactForm.showSuccess(),elements.contactForm.reset()},2e3)},setupFormValidation:()=>{elements.contactForm.querySelectorAll("input, textarea").forEach(e=>{e.addEventListener("blur",()=>{contactForm.validateField(e)}),e.addEventListener("input",()=>{contactForm.clearFieldError(e)})})},validateField:e=>{var t=e.value.trim();let n=!0,a="";return contactForm.clearFieldError(e),e.hasAttribute("required")&&!t?(n=!1,a="ar"===currentLanguage?"هذا الحقل مطلوب":"This field is required"):"email"===e.type&&t&&!contactForm.isValidEmail(t)&&(n=!1,a="ar"===currentLanguage?"البريد الإلكتروني غير صحيح":"Invalid email address"),n||contactForm.showFieldError(e,a),n},isValidEmail:e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),showFieldError:(e,t)=>{e.classList.add("error");let n=e.parentNode.querySelector(".error-message");n||((n=document.createElement("span")).className="error-message",e.parentNode.appendChild(n)),n.textContent=t},clearFieldError:e=>{e.classList.remove("error");e=e.parentNode.querySelector(".error-message");e&&e.remove()},showLoading:()=>{var e=elements.contactForm.querySelector('button[type="submit"]'),t=e.innerHTML;e.disabled=!0,e.innerHTML=`
            <i class="fas fa-spinner fa-spin"></i>
            <span>${"ar"===currentLanguage?"جاري الإرسال...":"Sending..."}</span>
        `,e.dataset.originalText=t},showSuccess:()=>{let e=elements.contactForm.querySelector('button[type="submit"]');e.disabled=!1,e.innerHTML=`
            <i class="fas fa-check"></i>
            <span>${"ar"===currentLanguage?"تم الإرسال بنجاح!":"Message Sent!"}</span>
        `,setTimeout(()=>{e.innerHTML=e.dataset.originalText},3e3)}},animations={init:()=>{"undefined"!=typeof AOS&&AOS.init({duration:1e3,easing:"ease-in-out",once:!0,offset:100}),animations.setupParallaxEffect(),animations.setupHoverEffects()},setupParallaxEffect:()=>{let e=document.querySelectorAll(".floating-element");var t=utils.throttle(()=>{let n=window.pageYOffset;e.forEach((e,t)=>{t=.5+.1*t,t=-n*t;e.style.transform=`translateY(${t}px)`})},16);window.addEventListener("scroll",t)},setupHoverEffects:()=>{document.querySelectorAll(".project-card").forEach(e=>{e.addEventListener("mouseenter",()=>{e.style.transform="translateY(-10px) scale(1.02)"}),e.addEventListener("mouseleave",()=>{e.style.transform="translateY(0) scale(1)"})}),document.querySelectorAll(".skill-category").forEach(e=>{e.addEventListener("mouseenter",()=>{e.style.transform="translateY(-5px)"}),e.addEventListener("mouseleave",()=>{e.style.transform="translateY(0)"})})}},performance={init:()=>{performance.lazyLoadImages(),performance.preloadCriticalResources()},lazyLoadImages:()=>{var e=document.querySelectorAll("img[data-src]");let t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&((e=e.target).src=e.dataset.src,e.classList.remove("lazy"),t.unobserve(e))})});e.forEach(e=>t.observe(e))},preloadCriticalResources:()=>{["https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap","https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"].forEach(e=>{var t=document.createElement("link");t.rel="preload",t.as="style",t.href=e,document.head.appendChild(t)})}},errorHandler={init:()=>{window.addEventListener("error",errorHandler.handleError),window.addEventListener("unhandledrejection",errorHandler.handlePromiseRejection)},handleError:e=>{console.error("JavaScript Error:",e.error)},handlePromiseRejection:e=>{console.error("Unhandled Promise Rejection:",e.reason)}},accessibility={init:()=>{accessibility.setupKeyboardNavigation(),accessibility.setupFocusManagement(),accessibility.setupScreenReaderSupport()},setupKeyboardNavigation:()=>{document.addEventListener("keydown",e=>{"Escape"===e.key&&(elements.hamburger.classList.remove("active"),elements.navMenu.classList.remove("active"))}),document.querySelectorAll("button, .btn").forEach(t=>{t.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t.click())})})},setupFocusManagement:()=>{let e=document.createElement("a");e.href="#main",e.textContent="ar"===currentLanguage?"تخطي إلى المحتوى الرئيسي":"Skip to main content",e.className="skip-link",e.style.cssText=`
            position: absolute;
            top: -40px;
            left: 6px;
            background: var(--primary-color);
            color: white;
            padding: 8px;
            text-decoration: none;
            border-radius: 4px;
            z-index: 10000;
            transition: top 0.3s;
        `,e.addEventListener("focus",()=>{e.style.top="6px"}),e.addEventListener("blur",()=>{e.style.top="-40px"}),document.body.insertBefore(e,document.body.firstChild)},setupScreenReaderSupport:()=>{let t=elements.hamburger;t&&(t.setAttribute("aria-label","ar"===currentLanguage?"فتح القائمة":"Open menu"),t.setAttribute("aria-expanded","false"),t.addEventListener("click",()=>{var e="true"===t.getAttribute("aria-expanded");t.setAttribute("aria-expanded",!e)})),document.addEventListener("languageChanged",()=>{accessibility.updateAriaLabels()})},updateAriaLabels:()=>{document.querySelectorAll("[data-aria-ar][data-aria-en]").forEach(e=>{var t=e.getAttribute("data-aria-"+currentLanguage);t&&e.setAttribute("aria-label",t)})}},app={init:()=>{"loading"===document.readyState?document.addEventListener("DOMContentLoaded",app.start):app.start()},start:()=>{try{loadingScreen.init(),navigation.init(),languageToggle.init(),themeToggle.init(),backToTop.init(),skillsAnimation.init(),statisticsAnimation.init(),contactForm.init(),animations.init(),performance.init(),errorHandler.init(),accessibility.init(),console.log("Portfolio website initialized successfully!")}catch(e){console.error("Error initializing portfolio:",e)}}};app.init(),"undefined"!=typeof module&&module.exports&&(module.exports={utils:utils,navigation:navigation,languageToggle:languageToggle,themeToggle:themeToggle,contactForm:contactForm});